{"ast":null,"code":"import _slicedToArray from \"/Users/simonfauvre/Documents/GitHub/P7/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/simonfauvre/Documents/GitHub/P7/src/Map.js\";\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { GoogleMap, withScriptjs, withGoogleMap, Marker, InfoWindow } from 'react-google-maps';\nimport mapStyle from \"./mapStyle.js\";\nimport useGeolocation from \"react-hook-geolocation\";\n\nconst Map = props => {\n  const _useState = useState(props.restaurant.default),\n        _useState2 = _slicedToArray(_useState, 2),\n        restaurantDisplay = _useState2[0],\n        setRestaurantDisplay = _useState2[1];\n\n  const _useState3 = useState(null),\n        _useState4 = _slicedToArray(_useState3, 2),\n        selectedRestaurant = _useState4[0],\n        setSelectedRestaurant = _useState4[1];\n\n  const _useState5 = useState(null),\n        _useState6 = _slicedToArray(_useState5, 2),\n        selectedLocation = _useState6[0],\n        setSelectedLocation = _useState6[1];\n\n  const location = useGeolocation();\n  let center = {\n    lat: location.latitude,\n    lng: location.longitude\n  };\n  console.log(restaurantDisplay);\n  useEffect(() => {\n    console.log(restaurantDisplay.features.filter(feature => feature.display === true));\n    setRestaurantDisplay(restaurantDisplay.features.filter(feature => feature.display === true));\n  }); // if (selectedRestaurant !== null) {\n  //   center = {lat: selectedRestaurant.lat, lng: selectedRestaurant.long};\n  // } else if (selectedLocation !== null) {\n  //   center = {lat: selectedLocation.latitude, lng: selectedLocation.longitude};\n  // } else if (selectedRestaurant === null || selectedLocation === null){\n  //   // Modifier pour ne plus centrer la carte sur un point précis\n  // }\n\n  const clickRestaurant = restaurant => {//console.log(restaurant);\n  };\n\n  return React.createElement(GoogleMap, {\n    defaultZoom: 13,\n    defaultCenter: {\n      lat: 45.764042,\n      lng: 4.835659\n    },\n    center: center,\n    defaultOptions: {\n      styles: mapStyle,\n      disableDefaultUI: true,\n      zoomControl: true,\n      zoomControlOptions: {\n        style: window.google.maps.ZoomControlStyle.SMALL\n      },\n      mapTypeControl: true,\n      mapTypeControlOptions: {\n        style: window.google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n        position: window.google.maps.ControlPosition.TOP_RIGHT\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }, React.createElement(Marker, {\n    position: {\n      lat: parseFloat(location.latitude),\n      lng: parseFloat(location.longitude)\n    },\n    onClick: () => {\n      setSelectedLocation(location);\n      setSelectedRestaurant(null);\n    },\n    icon: {\n      url: \"/here.png\",\n      scaledSize: new window.google.maps.Size(20, 20)\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }), selectedLocation && React.createElement(InfoWindow, {\n    position: {\n      lat: parseFloat(selectedLocation.latitude),\n      lng: parseFloat(selectedLocation.longitude)\n    },\n    options: {\n      pixelOffset: new window.google.maps.Size(0, -20)\n    },\n    onCloseClick: () => {\n      setSelectedLocation(null);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    style: {\n      fontSize: 14\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, \"Vous \\xEAtes ici\"))), restaurantDisplay.features.filter(feature => feature.display === true).map(restaurant => React.createElement(Marker, {\n    key: restaurant.restaurantID,\n    position: {\n      lat: restaurant.lat,\n      lng: restaurant.long\n    },\n    onClick: () => {\n      setSelectedRestaurant(restaurant);\n      setSelectedLocation(null);\n      clickRestaurant(restaurant);\n    },\n    icon: {\n      url: \"/logo_resto.png\",\n      scaledSize: new window.google.maps.Size(30, 30)\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), selectedRestaurant && React.createElement(InfoWindow, {\n    position: {\n      lat: selectedRestaurant.lat,\n      lng: selectedRestaurant.long\n    },\n    onCloseClick: () => {\n      setSelectedRestaurant(null);\n      setSelectedLocation(null);\n    },\n    options: {\n      pixelOffset: new window.google.maps.Size(0, -30)\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    style: {\n      fontSize: 14\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100\n    },\n    __self: this\n  }, selectedRestaurant.restaurantName))));\n};\n\nconst WrappedMap = withScriptjs(withGoogleMap(Map));\nexport default WrappedMap;","map":{"version":3,"sources":["/Users/simonfauvre/Documents/GitHub/P7/src/Map.js"],"names":["React","useState","useEffect","GoogleMap","withScriptjs","withGoogleMap","Marker","InfoWindow","mapStyle","useGeolocation","Map","props","restaurant","default","restaurantDisplay","setRestaurantDisplay","selectedRestaurant","setSelectedRestaurant","selectedLocation","setSelectedLocation","location","center","lat","latitude","lng","longitude","console","log","features","filter","feature","display","clickRestaurant","styles","disableDefaultUI","zoomControl","zoomControlOptions","style","window","google","maps","ZoomControlStyle","SMALL","mapTypeControl","mapTypeControlOptions","MapTypeControlStyle","DROPDOWN_MENU","position","ControlPosition","TOP_RIGHT","parseFloat","url","scaledSize","Size","pixelOffset","fontSize","map","restaurantID","long","restaurantName","WrappedMap"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport {GoogleMap, withScriptjs, withGoogleMap, Marker, InfoWindow} from 'react-google-maps';\nimport mapStyle from \"./mapStyle.js\";\nimport useGeolocation from \"react-hook-geolocation\";\n\nconst Map = props => {\n\n    const [restaurantDisplay, setRestaurantDisplay] = useState(props.restaurant.default);\n    const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n    const [selectedLocation, setSelectedLocation] = useState(null);\n    const location = useGeolocation();\n    let center = {lat: location.latitude, lng: location.longitude};\n\n    console.log(restaurantDisplay);\n\n    useEffect(() => {\n        console.log(restaurantDisplay.features.filter(feature => feature.display === true));\n        setRestaurantDisplay(restaurantDisplay.features.filter(feature => feature.display === true));\n    });\n  \n    // if (selectedRestaurant !== null) {\n    //   center = {lat: selectedRestaurant.lat, lng: selectedRestaurant.long};\n    // } else if (selectedLocation !== null) {\n    //   center = {lat: selectedLocation.latitude, lng: selectedLocation.longitude};\n    // } else if (selectedRestaurant === null || selectedLocation === null){\n    //   // Modifier pour ne plus centrer la carte sur un point précis\n    // }\n  \n    const clickRestaurant = (restaurant) => {\n        //console.log(restaurant);\n    }\n  \n    return (\n      <GoogleMap \n        defaultZoom={13} \n        defaultCenter={{ lat: 45.764042, lng: 4.835659 }}\n        center={center}\n        defaultOptions={{\n          styles: mapStyle, \n          disableDefaultUI: true, \n          zoomControl: true, \n          zoomControlOptions: {\n            style: window.google.maps.ZoomControlStyle.SMALL,\n          },\n          mapTypeControl: true,\n          mapTypeControlOptions: {\n            style: window.google.maps.MapTypeControlStyle.DROPDOWN_MENU,\n            position: window.google.maps.ControlPosition.TOP_RIGHT\n          }\n        }}>\n        <Marker\n          position={{lat: parseFloat(location.latitude), lng: parseFloat(location.longitude)}}\n          onClick={() => {\n            setSelectedLocation(location);\n            setSelectedRestaurant(null);\n          }}\n          icon={{\n            url: \"/here.png\",\n            scaledSize: new window.google.maps.Size(20, 20)\n          }}/>\n  \n        {selectedLocation && (\n        <InfoWindow \n          position={{lat: parseFloat(selectedLocation.latitude), lng: parseFloat(selectedLocation.longitude)}}\n          options={{pixelOffset: new window.google.maps.Size(0, -20)}}\n          onCloseClick={() => {\n            setSelectedLocation(null);\n          }}>\n          <div>\n            <h2 style={{fontSize: 14}}>Vous êtes ici</h2>\n          </div>\n        </InfoWindow>\n        )}\n\n        {restaurantDisplay.features.filter(feature => feature.display === true).map(restaurant => (\n          <Marker \n            key={restaurant.restaurantID} \n            position={{lat: restaurant.lat, lng: restaurant.long}}\n            onClick={() => {\n              setSelectedRestaurant(restaurant);\n              setSelectedLocation(null);\n              clickRestaurant(restaurant);\n            }}\n            icon={{\n              url: \"/logo_resto.png\",\n              scaledSize: new window.google.maps.Size(30, 30)\n            }}/>\n        ))}\n  \n        {selectedRestaurant && (\n          <InfoWindow \n            position={{lat: selectedRestaurant.lat, lng: selectedRestaurant.long}}\n            onCloseClick={() => {\n              setSelectedRestaurant(null);\n              setSelectedLocation(null);\n            }}\n            options={{pixelOffset: new window.google.maps.Size(0, -30)}}>\n            <div>\n              <h2 style={{fontSize: 14}}>{selectedRestaurant.restaurantName}</h2>\n            </div>\n          </InfoWindow>\n        )}\n      </GoogleMap>\n    );\n}\n  \nconst WrappedMap = withScriptjs(withGoogleMap(Map));\nexport default WrappedMap;"]},"metadata":{},"sourceType":"module"}